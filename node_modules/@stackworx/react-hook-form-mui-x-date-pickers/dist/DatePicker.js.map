{"version":3,"file":"DatePicker.js","sources":["../src/DatePicker.tsx"],"sourcesContent":["import {\n  FieldPath,\n  FieldValues,\n  useController,\n  UseControllerProps,\n} from 'react-hook-form';\nimport {\n  DatePicker as MuiDatePicker,\n  type DatePickerProps as MuiDatePickerProps,\n} from '@mui/x-date-pickers/DatePicker';\nimport type { PickerValidDate } from '@mui/x-date-pickers/models';\nimport {\n  useLocalizationContext,\n  useUtils,\n  validateDate,\n} from '@mui/x-date-pickers/internals';\nimport { mapDatePickerValidationErrorMessage } from './utils/DatePickerValidationErrorsToMessage.ts';\n\nexport type DatePickerProps<\n  TFieldValues extends FieldValues,\n  TName extends FieldPath<TFieldValues>,\n  TDate extends PickerValidDate,\n  TEnableAccessibleFieldDOMStructure extends boolean = false,\n> = Omit<\n  MuiDatePickerProps<TDate, TEnableAccessibleFieldDOMStructure>,\n  'value' | 'name'\n> &\n  UseControllerProps<TFieldValues, TName>;\n\nexport function DatePicker<\n  TFieldValues extends FieldValues,\n  TName extends FieldPath<TFieldValues>,\n  TDate extends PickerValidDate,\n  TEnableAccessibleFieldDOMStructure extends boolean = false,\n>({\n  name,\n  rules,\n  control,\n  ...props\n}: DatePickerProps<\n  TFieldValues,\n  TName,\n  TDate,\n  TEnableAccessibleFieldDOMStructure\n>) {\n  const { slotProps, ...otherPickerProps } = props;\n\n  const { getTimezone } = useUtils();\n  const adapter = useLocalizationContext<TDate>();\n\n  const {\n    field: { onChange, value, ref, onBlur },\n    fieldState,\n  } = useController({\n    name,\n    control,\n    rules: {\n      ...rules,\n      validate: {\n        ...rules?.validate,\n        internalMuiError: () => {\n          const muiValidationError = validateDate({\n            value,\n            props: {\n              ...props,\n              disableFuture: !!props.disableFuture,\n              disablePast: !!props.disablePast,\n              minDate: props.minDate,\n              maxDate: props.maxDate,\n              timezone: getTimezone(value),\n            },\n            adapter,\n          });\n\n          return (\n            mapDatePickerValidationErrorMessage(muiValidationError, props) ??\n            true\n          );\n        },\n      },\n    },\n  });\n\n  return (\n    <MuiDatePicker\n      onChange={onChange}\n      value={value}\n      slotProps={{\n        ...slotProps,\n        textField: {\n          ...slotProps?.textField,\n          inputRef: ref,\n          error: !!fieldState.error,\n          onBlur,\n          helperText:\n            //@ts-expect-error incomplete typing\n            fieldState.error?.message ?? slotProps?.textField?.helperText,\n        },\n      }}\n      {...otherPickerProps}\n    />\n  );\n}\n"],"names":["MuiDatePicker"],"mappings":";;;;;AA6BO,SAAS,WAKd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GAKG;;AACD,QAAM,EAAE,WAAW,GAAG,iBAAA,IAAqB;AAErC,QAAA,EAAE,gBAAgB;AACxB,QAAM,UAAU;AAEV,QAAA;AAAA,IACJ,OAAO,EAAE,UAAU,OAAO,KAAK,OAAO;AAAA,IACtC;AAAA,MACE,cAAc;AAAA,IAChB;AAAA,IACA;AAAA,IACA,OAAO;AAAA,MACL,GAAG;AAAA,MACH,UAAU;AAAA,QACR,GAAG,+BAAO;AAAA,QACV,kBAAkB,MAAM;AACtB,gBAAM,qBAAqB,aAAa;AAAA,YACtC;AAAA,YACA,OAAO;AAAA,cACL,GAAG;AAAA,cACH,eAAe,CAAC,CAAC,MAAM;AAAA,cACvB,aAAa,CAAC,CAAC,MAAM;AAAA,cACrB,SAAS,MAAM;AAAA,cACf,SAAS,MAAM;AAAA,cACf,UAAU,YAAY,KAAK;AAAA,YAC7B;AAAA,YACA;AAAA,UAAA,CACD;AAGC,iBAAA,oCAAoC,oBAAoB,KAAK,KAC7D;AAAA,QAEJ;AAAA,MACF;AAAA,IACF;AAAA,EAAA,CACD;AAGC,SAAA;AAAA,IAACA;AAAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA,WAAW;AAAA,QACT,GAAG;AAAA,QACH,WAAW;AAAA,UACT,GAAG,uCAAW;AAAA,UACd,UAAU;AAAA,UACV,OAAO,CAAC,CAAC,WAAW;AAAA,UACpB;AAAA,UACA;AAAA;AAAA,cAEE,gBAAW,UAAX,mBAAkB,cAAW,4CAAW,cAAX,mBAAsB;AAAA;AAAA,QACvD;AAAA,MACF;AAAA,MACC,GAAG;AAAA,IAAA;AAAA,EAAA;AAGV;"}